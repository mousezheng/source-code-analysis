---
title: overView
tags: 数据库
renderNumberedHeading: true
grammar_cjkRuby: true
---

# DBMS 系统概述

[**数据库管理系统**](https://baike.baidu.com/item/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F)（Database Management System，DBMS）是一种操纵和管理数据库的大型软件，用于建立、使用和维护数据库，简称DBMS。

## 数据库管理系统概述
![概述图](https://raw.githubusercontent.com/mousezheng/source-code-analysis/master/img/2020_8_20_数据库系统实现_1597890447178.png)
	
### 查询处理概述

> 查询处理指：“可能影响数据库内容，或者获取数据，但不影响数据库模式”。

- 查询响应
	- 查询编译器（分析优化查询，得到查询计划）
	- 执行引擎（操作资源管理器）
	- 操作管理器（存储数据文件，文件数据格式和记录大小以及索引文件等）
	- 缓冲区管理器（从持久存储数据的辅助器中将部分数据存储到缓冲区中，比如从磁盘中将高频访问数据放入主存中）
	- 存储管理器（可以作为磁盘控制器的抽象用于控制数据在磁盘和主存之间传输，缓冲区管理器需要通过存储管理器访问磁盘）
- 事务处理（将一组若干查询或其他动作，作为一个执行单位原子并且孤立的执行）
	- 并发控制管理器和调度器（保证事务原子性和孤立性）
	- 日志和恢复管理器（事务的持久性）

### 事务处理

事务具有以下特性 (**ACID**)
- 原子性 (atomicity)：完全执行或完全不执行.
- 一致性 (consistency)：事务的执行的前后数据的完整性保持一致.
- 隔离性 (isolation)：一个事务执行的过程中,不应该受到其他事务的干扰
- 持久性(durability)：事务一旦结束,数据就持久到数据库

事务处理器具有以下功能
- 日志记录：数据库每个变化都在磁盘上记录日志
- 并发控制：事务的执行从表面是必须是孤立的
- 死锁解决：如果发生死锁，则由事务处理器回滚或者终止部分事务

### 查询处理器

**查询编译器**功能是将查询翻译为**查询计划**（在数据上执行一系列操作的集合），主要有以下三部分组成
1. 查询分析器（将文本形式的查询简历成树结构）
2. 查询预处理器（对查询进行语义检查，将分析树转换为最初查询计划的代数操作树）
3. 查询优化器（将查询计划转换为对实际数据最有效的操作序列）

**执行引擎**负责执行查询计划的每一步
- 与缓冲区交互（对于数据的操作需要将数据取到缓冲区中）
- 与调度器交互（避免访问加锁的数据）
- 与日志管理器交互（保证数据所有修改都记录日志）

## 数据库模型及SQL语言

### 数据库模型

关系是元组的集合，元组是值的列表（元组与数组类似）

如
| name | id | age|
|-|-|-|
| 小明 | 1001 | 18 |
| 小李 | 1002 | 19 |
| 小红 | 1003 | 19 |

上表中关系模型为：
User(name, id, age)

**数据库模型**指的是关系模型的集合，即表的集合。

### SQL

数据库修改命令 INSERT、DELETE、UPDATE
数据库 查询命令 SELECT

**查询命令**通常结构 select-from-where

| 命令| 对应内容|
|-|-|
| SELECT | 属性表|
| FROM | 关系表|
| WHERE| 条件|
| GROUP BY| 属性表|
| HAVING| 条件|
| ORDER BY|属性表 |

**子查询**  SQL 允许在FROM WHERE HAVING 后使用子查询

**视图** 与子查询类似，创建一个临时的视图表，存储子查询查询结果集
