---
title: 保证数据读写一致方案
tags: 新建,模板,小书匠
renderNumberedHeading: true
grammar_cjkRuby: true
---

## 重试

偶发性读写故障，多次尝试后可正常读写。

如果可以判断 读写异常，可以尝试在读写异常时多次读写，直至成功或者超出预设次数限制。

## 校验位

给数据添加附加位，即**校验位**。校验位的数值取决于存储数据的实际内容。
读数据时 如果校验位不正确，则有读错误。如果校验位正确，则有可能是错误的，但可以通过多个校验位，尽可能减少错误的可能性。

校验位有一种简单的形式，**奇偶校验**。根据数据生成0或者1作为奇偶位。如果只有一个奇偶位的话，只能50%保证数据准确性。
此时需要设置尽可能多的奇偶位。如 4 位，理想情况下就可以将错误降低到 6.25%。

最后增加校验位只能判断是否错误，无法纠正错误。

## 稳定存储

写 （设置一个对称的扇区，如果当前扇区多次写都无法正常写入，则换对称的扇区也多次写入，判断是否正常）
读（读取对称的两个扇区，如果有一个正常值即获取到正常结果，否则则表示写入不可读）